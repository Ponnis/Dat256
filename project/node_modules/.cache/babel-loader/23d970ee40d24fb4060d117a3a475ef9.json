{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\src\\\\SearchPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport FarmerInformation from './farmerInformation/FarmerInformation';\nimport { getFarmerById, getAmountOfFarmers } from './farmerInformation/Farmers';\nimport FarmerBox from './farmerBox/FarmerBox';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport { List } from 'react-virtualized';\nimport SearchField from 'react-search-field';\nimport Filter from './filterBox/Filter';\nimport './SearchPage.css';\nimport _ from 'lodash';\nimport { Cart } from 'react-cart-components';\nimport { Provider } from \"react-redux\";\n\nvar SearchPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPage, _Component);\n\n  function SearchPage() {\n    var _this;\n\n    _classCallCheck(this, SearchPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchPage).call(this));\n\n    _this.clickedCloseFarmerInformation = function () {\n      _this.setState({\n        farmerInformation: false\n      });\n    };\n\n    _this.reRender = function () {\n      _this.setState({\n        state: _this.state\n      });\n    };\n\n    _this.handleCheckout = function (product) {\n      //Makes an JSON-object of the products in the cart\n      var str = JSON.stringify(product); //Reads the json object \n\n      var json = JSON.parse(str); //Checks if there are any products in the cart, if true then it alerts\n\n      if (json.products.length === 0) {\n        alert(\"Din varukorg är tom, lägg till varor innan du går till betalning.\");\n      } //else go to payment\n      else {\n          _this.props.checkout(product);\n        }\n    };\n\n    _this.rowRenderer = function (_ref) {\n      var index = _ref.index;\n      return _this.filterFarmers()[index];\n    };\n\n    _this.state = {\n      farmerInformation: false,\n      farmerID: 0,\n      search: \"\",\n      categoryFilter: [],\n      minRating: 1,\n      minDistance: 50\n    };\n    return _this;\n  } //Farmer state gets updated\n\n\n  _createClass(SearchPage, [{\n    key: \"clickedOpenFarmerInformation\",\n    value: function clickedOpenFarmerInformation(id) {\n      this.setState({\n        farmerID: id,\n        farmerInformation: true\n      });\n    }\n  }, {\n    key: \"categoryFilter\",\n    value: function categoryFilter(category, catState) {\n      var filteredCat = this.state.categoryFilter;\n\n      if (catState) {\n        filteredCat.push(category);\n      } else {\n        filteredCat = _.pull(filteredCat, category);\n      }\n\n      this.setState({\n        categoryFilter: filteredCat\n      });\n    }\n  }, {\n    key: \"ratingFilter\",\n    value: function ratingFilter(rating) {\n      this.setState({\n        minRating: rating\n      });\n    }\n  }, {\n    key: \"distanceFilter\",\n    value: function distanceFilter(distance) {\n      this.setState({\n        minDistance: distance\n      });\n    }\n  }, {\n    key: \"filterFarmers\",\n    value: function filterFarmers() {\n      var _this2 = this;\n\n      var list = getAmountOfFarmers().map(function (index) {\n        return React.createElement(FarmerBox, {\n          farmer: getFarmerById(index),\n          onClick: function onClick() {\n            return _this2.clickedOpenFarmerInformation(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        });\n      });\n      var newList = [];\n      list.forEach(function (element) {\n        if (element.props.farmer.name.toLowerCase().includes(_this2.state.search.toLowerCase())) {\n          if (element.props.farmer.distance <= _this2.state.minDistance) {\n            if (element.props.farmer.rating >= _this2.state.minRating) {\n              if (_this2.state.categoryFilter.length === 0) {\n                newList.push(element);\n              } else if (_.difference(_this2.state.categoryFilter, element.props.farmer.types).length === 0) {\n                newList.push(element);\n              }\n            }\n          }\n        }\n      });\n      return _.sortBy(newList, [function (element) {\n        return element.props.farmer.distance;\n      }]);\n    }\n  }, {\n    key: \"onChangeBound\",\n    value: function onChangeBound(value) {\n      this.setState({\n        search: value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      //Calls reRender when the window's size is changed\n      var self = this;\n\n      window.onresize = function (event) {\n        self.reRender();\n      };\n\n      return React.createElement(Provider, {\n        store: this.props.store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Container, {\n        fluid: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Cart, {\n        currency: \"SEK\",\n        checkoutLabel: \"Till betalning\",\n        currencySymbol: \"SEK\",\n        handleCheckout: function handleCheckout(products) {\n          return _this3.handleCheckout(products);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Row, {\n        noGutters: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Filter, {\n        onCategoryClick: function onCategoryClick(category, number) {\n          return _this3.categoryFilter(category, number);\n        },\n        onRatingClick: function onRatingClick(rating) {\n          return _this3.ratingFilter(rating);\n        },\n        onDistanceClick: function onDistanceClick(distance) {\n          return _this3.distanceFilter(distance);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(SearchField, {\n        classNames: \"SearchField\",\n        placeholder: \"S\\xF6k bondg\\xE5rd\",\n        onChange: function onChange(value) {\n          return _this3.onChangeBound(value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(List, {\n        width: window.innerWidth * 0.4,\n        height: window.innerHeight - 25,\n        rowCount: this.filterFarmers().length,\n        rowHeight: window.innerHeight / 3.5,\n        rowRenderer: this.rowRenderer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.farmerInformation ? React.createElement(FarmerInformation, {\n        farmer: getFarmerById(this.state.farmerID),\n        buyClick: this.clickedBuy,\n        onClose: this.clickedCloseFarmerInformation,\n        store: this.props.store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return SearchPage;\n}(Component);\n\nexport default SearchPage;","map":{"version":3,"sources":["C:\\Users\\sarah\\OneDrive\\Documents\\Dat256\\project\\src\\SearchPage.js"],"names":["React","Component","FarmerInformation","getFarmerById","getAmountOfFarmers","FarmerBox","Row","Col","Container","List","SearchField","Filter","_","Cart","Provider","SearchPage","clickedCloseFarmerInformation","setState","farmerInformation","reRender","state","handleCheckout","product","str","JSON","stringify","json","parse","products","length","alert","props","checkout","rowRenderer","index","filterFarmers","farmerID","search","categoryFilter","minRating","minDistance","id","category","catState","filteredCat","push","pull","rating","distance","list","map","clickedOpenFarmerInformation","newList","forEach","element","farmer","name","toLowerCase","includes","difference","types","sortBy","value","self","window","onresize","event","store","number","ratingFilter","distanceFilter","onChangeBound","innerWidth","innerHeight","clickedBuy"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\nimport FarmerInformation from './farmerInformation/FarmerInformation'\r\nimport { getFarmerById, getAmountOfFarmers } from './farmerInformation/Farmers'\r\nimport FarmerBox from './farmerBox/FarmerBox'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Container from 'react-bootstrap/Container'\r\nimport { List } from 'react-virtualized'\r\nimport SearchField from 'react-search-field'\r\nimport Filter from './filterBox/Filter'\r\nimport './SearchPage.css';\r\nimport _ from 'lodash';\r\nimport { Cart } from 'react-cart-components'\r\nimport { Provider } from \"react-redux\";\r\n\r\nclass SearchPage extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = { farmerInformation: false, farmerID: 0, search: \"\", categoryFilter: [], minRating: 1, minDistance: 50 }\r\n    }\r\n    //Farmer state gets updated\r\n    clickedOpenFarmerInformation(id) {\r\n        this.setState({\r\n            farmerID: id,\r\n            farmerInformation: true\r\n        });\r\n    };\r\n\r\n    //Farmer state gets updated\r\n    clickedCloseFarmerInformation = () => {\r\n        this.setState({\r\n            farmerInformation: false\r\n        })\r\n    };\r\n\r\n    //Updates render()\r\n    reRender = () => {\r\n        this.setState({ state: this.state })\r\n    };\r\n\r\n    //Handles the checkout call\r\n    handleCheckout=(product)=>{\r\n        //Makes an JSON-object of the products in the cart\r\n        var str = JSON.stringify(product);\r\n        //Reads the json object \r\n        var json = JSON.parse(str);\r\n        //Checks if there are any products in the cart, if true then it alerts\r\n        if (json.products.length===0){\r\n            alert(\"Din varukorg är tom, lägg till varor innan du går till betalning.\");\r\n        }\r\n        //else go to payment\r\n        else{\r\n            this.props.checkout(product,)\r\n        }\r\n    }\r\n\r\n    categoryFilter(category, catState) {\r\n        let filteredCat = this.state.categoryFilter;\r\n        if (catState) {\r\n            filteredCat.push(category);\r\n        } else {\r\n            filteredCat = _.pull(filteredCat, category)\r\n        }\r\n        this.setState({\r\n            categoryFilter: filteredCat\r\n        });\r\n    }\r\n\r\n    ratingFilter(rating) {\r\n        this.setState({\r\n            minRating: rating\r\n        });\r\n    }\r\n\r\n    distanceFilter(distance) {\r\n        this.setState({\r\n            minDistance: distance,\r\n        });\r\n    }\r\n\r\n    filterFarmers() {\r\n        const list = getAmountOfFarmers().map(index => <FarmerBox farmer={getFarmerById(index)} onClick={() => this.clickedOpenFarmerInformation(index)} />)\r\n        const newList = [];\r\n\r\n        list.forEach(element => {\r\n            if (element.props.farmer.name.toLowerCase().includes(this.state.search.toLowerCase())) {\r\n                if (element.props.farmer.distance <= this.state.minDistance) {\r\n                    if (element.props.farmer.rating >= this.state.minRating) {\r\n                        if (this.state.categoryFilter.length === 0) {\r\n                            newList.push(element);\r\n                        } else if (_.difference(this.state.categoryFilter, element.props.farmer.types).length === 0) {\r\n                            newList.push(element);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return _.sortBy(newList,[function(element){return element.props.farmer.distance;}]);\r\n    }\r\n\r\n    onChangeBound(value) {\r\n        this.setState({\r\n            search: value,\r\n        });\r\n    }\r\n\r\n    rowRenderer = ({ index }) => {\r\n        return (this.filterFarmers()[index])\r\n    };\r\n\r\n\r\n    render() {\r\n        //Calls reRender when the window's size is changed\r\n        var self = this;\r\n        window.onresize = function (event) {\r\n            self.reRender()\r\n        };\r\n\r\n        return (\r\n            <Provider store={this.props.store}>\r\n                <Container fluid={true}>\r\n                    <Cart currency=\"SEK\"\r\n                        checkoutLabel=\"Till betalning\"\r\n                        currencySymbol=\"SEK\"\r\n                        handleCheckout = {(products) => this.handleCheckout(products)}\r\n\r\n                    />\r\n\r\n                    <Row noGutters={true}>\r\n                        <Col xs={\"auto\"}>\r\n                            <Filter\r\n                                onCategoryClick={(category, number) => this.categoryFilter(category, number)} onRatingClick={(rating) => this.ratingFilter(rating)} onDistanceClick={(distance) => this.distanceFilter(distance)}>\r\n                            </Filter>\r\n                        </Col>\r\n                        <Col xs={\"auto\"}>\r\n                            <SearchField classNames='SearchField'\r\n                                placeholder=\"Sök bondgård\"\r\n                                onChange={(value) => this.onChangeBound(value)}\r\n                            />\r\n                            <List\r\n                                width={window.innerWidth * 0.4}\r\n                                height={window.innerHeight - 25}\r\n                                rowCount={this.filterFarmers().length}\r\n                                rowHeight={window.innerHeight / 3.5}\r\n                                rowRenderer={this.rowRenderer}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={\"auto\"}>\r\n                            {this.state.farmerInformation ? <FarmerInformation farmer={getFarmerById(this.state.farmerID)} buyClick={this.clickedBuy} onClose={this.clickedCloseFarmerInformation} store={this.props.store} /> : <div></div>}\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </Provider>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default SearchPage;\r\n\r\n"]},"metadata":{},"sourceType":"module"}