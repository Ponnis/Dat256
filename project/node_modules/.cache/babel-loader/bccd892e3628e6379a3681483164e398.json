{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\sarah\\\\OneDrive\\\\Documents\\\\Dat256\\\\project\\\\src\\\\SearchPage.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport FarmerInformation from './farmerInformation/FarmerInformation';\nimport { getFarmerById, getAmountOfFarmers } from './farmerInformation/Farmers';\nimport FarmerBox from './farmerBox/FarmerBox';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport { List } from 'react-virtualized';\nimport SearchField from 'react-search-field';\nimport Filter from './filterBox/Filter';\nimport './SearchPage.css';\nimport _ from 'lodash';\nimport { Cart } from 'react-cart-components';\nimport { Provider } from \"react-redux\";\n\nvar SearchPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPage, _Component);\n\n  function SearchPage() {\n    var _this;\n\n    _classCallCheck(this, SearchPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchPage).call(this));\n\n    _this.clickedCloseFarmerInformation = function () {\n      _this.setState({\n        farmerInformation: false\n      });\n    };\n\n    _this.reRender = function () {\n      _this.setState({\n        state: _this.state\n      });\n    };\n\n    _this.rowRenderer = function (_ref) {\n      var index = _ref.index;\n      return _this.filterFarmers()[index];\n    };\n\n    _this.state = {\n      farmerInformation: false,\n      farmerID: 0,\n      search: \"\",\n      categoryFilter: [],\n      minRating: 1\n    };\n    return _this;\n  } //Farmer state gets updated\n\n\n  _createClass(SearchPage, [{\n    key: \"clickedOpenFarmerInformation\",\n    value: function clickedOpenFarmerInformation(id) {\n      this.setState({\n        farmerID: id,\n        farmerInformation: true\n      });\n    }\n  }, {\n    key: \"categoryFilter\",\n    value: function categoryFilter(category, catState) {\n      var filteredCat = this.state.categoryFilter;\n\n      if (catState) {\n        filteredCat.push(category);\n      } else {\n        filteredCat = _.pull(filteredCat, category);\n      }\n\n      this.setState({\n        categoryFilter: filteredCat\n      });\n    }\n  }, {\n    key: \"ratingFilter\",\n    value: function ratingFilter(rating) {\n      this.setState({\n        minRating: rating\n      });\n    }\n  }, {\n    key: \"filterFarmers\",\n    value: function filterFarmers() {\n      var _this2 = this;\n\n      var list = getAmountOfFarmers().map(function (index) {\n        return React.createElement(FarmerBox, {\n          farmer: getFarmerById(index),\n          onClick: function onClick() {\n            return _this2.clickedOpenFarmerInformation(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        });\n      });\n      var newList = [];\n      list.forEach(function (element) {\n        if (element.props.farmer.name.toLowerCase().includes(_this2.state.search.toLowerCase())) {\n          if (element.props.farmer.rating >= _this2.state.minRating) {\n            if (_this2.state.categoryFilter.length === 0) {\n              newList.push(element);\n            } else if (_.difference(_this2.state.categoryFilter, element.props.farmer.types).length === 0) {\n              newList.push(element);\n            }\n          }\n        }\n      });\n      return newList;\n    }\n  }, {\n    key: \"onChangeBound\",\n    value: function onChangeBound(value) {\n      this.setState({\n        search: value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      //Calls reRender when the window's size is changed\n      var self = this;\n\n      window.onresize = function (event) {\n        self.reRender();\n      };\n\n      return React.createElement(Provider, {\n        store: this.props.store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Container, {\n        fluid: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Cart, {\n        currency: \"SEK\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(Row, {\n        noGutters: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Filter, {\n        onCategoryClick: function onCategoryClick(category, number) {\n          return _this3.categoryFilter(category, number);\n        },\n        onRatingClick: function onRatingClick(rating) {\n          return _this3.ratingFilter(rating);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(SearchField, {\n        classNames: \"SearchField\",\n        placeholder: \"S\\xF6k bondg\\xE5rd\",\n        onChange: function onChange(value) {\n          return _this3.onChangeBound(value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(List, {\n        width: window.innerWidth * 0.4,\n        height: window.innerHeight - 25,\n        rowCount: this.filterFarmers().length,\n        rowHeight: window.innerHeight / 3.5,\n        rowRenderer: this.rowRenderer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: \"auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.state.farmerInformation ? React.createElement(FarmerInformation, {\n        farmer: getFarmerById(this.state.farmerID),\n        buyClick: this.clickedBuy,\n        onClose: this.clickedCloseFarmerInformation,\n        store: this.props.store,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return SearchPage;\n}(Component);\n\nexport default SearchPage;","map":{"version":3,"sources":["C:\\Users\\sarah\\OneDrive\\Documents\\Dat256\\project\\src\\SearchPage.js"],"names":["React","Component","FarmerInformation","getFarmerById","getAmountOfFarmers","FarmerBox","Row","Col","Container","List","SearchField","Filter","_","Cart","Provider","SearchPage","clickedCloseFarmerInformation","setState","farmerInformation","reRender","state","rowRenderer","index","filterFarmers","farmerID","search","categoryFilter","minRating","id","category","catState","filteredCat","push","pull","rating","list","map","clickedOpenFarmerInformation","newList","forEach","element","props","farmer","name","toLowerCase","includes","length","difference","types","value","self","window","onresize","event","store","number","ratingFilter","onChangeBound","innerWidth","innerHeight","clickedBuy"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\nimport FarmerInformation from './farmerInformation/FarmerInformation'\r\nimport { getFarmerById, getAmountOfFarmers } from './farmerInformation/Farmers'\r\nimport FarmerBox from './farmerBox/FarmerBox'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Container from 'react-bootstrap/Container'\r\nimport { List } from 'react-virtualized'\r\nimport SearchField from 'react-search-field'\r\nimport Filter from './filterBox/Filter'\r\nimport './SearchPage.css';\r\nimport _ from 'lodash';\r\nimport { Cart } from 'react-cart-components'\r\nimport { Provider } from \"react-redux\";\r\n\r\nclass SearchPage extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = { farmerInformation: false, farmerID: 0, search: \"\", categoryFilter: [], minRating: 1 }\r\n    }\r\n    //Farmer state gets updated\r\n    clickedOpenFarmerInformation(id) {\r\n        this.setState({\r\n            farmerID: id,\r\n            farmerInformation: true\r\n        });\r\n    };\r\n\r\n    //Farmer state gets updated\r\n    clickedCloseFarmerInformation = () => {\r\n        this.setState({\r\n            farmerInformation: false\r\n        })\r\n    };\r\n\r\n    //Updates render()\r\n    reRender = () => {\r\n        this.setState({ state: this.state })\r\n    };\r\n\r\n    categoryFilter(category, catState) {\r\n        let filteredCat = this.state.categoryFilter;\r\n        if (catState) {\r\n            filteredCat.push(category);\r\n        } else {\r\n            filteredCat = _.pull(filteredCat, category)\r\n        }\r\n        this.setState({\r\n            categoryFilter: filteredCat\r\n        });\r\n    }\r\n\r\n    ratingFilter(rating) {\r\n        this.setState({\r\n            minRating: rating\r\n        });\r\n    }\r\n\r\n    filterFarmers() {\r\n        const list = getAmountOfFarmers().map(index => <FarmerBox farmer={getFarmerById(index)} onClick={() => this.clickedOpenFarmerInformation(index)} />)\r\n        const newList = [];\r\n\r\n        list.forEach(element => {\r\n            if (element.props.farmer.name.toLowerCase().includes(this.state.search.toLowerCase())) {\r\n                if (element.props.farmer.rating >= this.state.minRating) {\r\n                    if (this.state.categoryFilter.length === 0) {\r\n                        newList.push(element);\r\n                    } else if (_.difference(this.state.categoryFilter, element.props.farmer.types).length === 0) {\r\n                        newList.push(element);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return newList;\r\n    }\r\n\r\n    onChangeBound(value) {\r\n        this.setState({\r\n            search: value,\r\n        });\r\n    }\r\n\r\n    rowRenderer = ({ index }) => {\r\n        return (this.filterFarmers()[index])\r\n    };\r\n\r\n\r\n    render() {\r\n        //Calls reRender when the window's size is changed\r\n        var self = this;\r\n        window.onresize = function (event) {\r\n            self.reRender()\r\n        };\r\n\r\n        return (\r\n            <Provider store={this.props.store}>\r\n            <Container fluid={true}>\r\n                    <Cart currency=\"SEK\"\r\n                     />\r\n                \r\n                <Row noGutters={true}>\r\n                    <Col xs={\"auto\"}>\r\n                        <Filter\r\n                            onCategoryClick={(category, number) => this.categoryFilter(category, number)} onRatingClick={(rating) => this.ratingFilter(rating)}>\r\n                        </Filter>\r\n                    </Col>\r\n                    <Col xs={\"auto\"}>\r\n                        <SearchField classNames='SearchField'\r\n                            placeholder=\"Sök bondgård\"\r\n                            onChange={(value) => this.onChangeBound(value)}\r\n                        />\r\n                        <List\r\n                            width={window.innerWidth * 0.4}\r\n                            height={window.innerHeight - 25}\r\n                            rowCount={this.filterFarmers().length}\r\n                            rowHeight={window.innerHeight / 3.5}\r\n                            rowRenderer={this.rowRenderer}\r\n                        />\r\n                    </Col>\r\n                    <Col xs={\"auto\"}>\r\n                        {this.state.farmerInformation ? <FarmerInformation farmer={getFarmerById(this.state.farmerID)} buyClick={this.clickedBuy} onClose={this.clickedCloseFarmerInformation} store={this.props.store} /> : <div></div>}\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            </Provider>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default SearchPage;\r\n\r\n"]},"metadata":{},"sourceType":"module"}